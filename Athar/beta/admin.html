<!-- admin.html -->
<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ููุญุฉ ุงูุฅุฏุงุฑุฉ โ ุฃุซุฑ</title>
    <link rel="icon" type="image/x-icon" href="assets/icons/favicon.ico" />
    <link rel="shortcut icon" href="assets/icons/favicon.ico" />
    <link rel="apple-touch-icon" href="assets/icons/logo.png" />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="assets/css/admin.css" />
    <meta name="color-scheme" content="dark light" />
    <style></style>
  </head>
  <body>
    <div id="navbar" data-component="components/navbar.html"></div>

    <div class="user"><span class="muted" id="whoami"></span></div>

    <header>
      <div class="hero">
        <h1 class="logo">ููุญุฉ ุงูุชุญูู ูุฃุญูู ูุฏู</h1>
        <div class="tag">
          <span class="dot"></span>ุฃุญูู ูุตููุฉ ูุฑุงูุฌ ุจุงูุนุงูู ุ ูููุฉ ุฃุซุฑ
        </div>
      </div>
    </header>

    <main class="container">
      <!-- ุงููุตูู ูุฑููุถ -->
      <section class="card" id="denyCard" style="display: none">
        <h2 class="title">ุงููุตูู ูุฑููุถ</h2>
        <p>ูุฐู ุงูุตูุญุฉ ูููุดุฑููู ููุท.</p>
      </section>

      <!-- ุชุจููุจุงุช -->
      <section class="card" id="tabsCard" style="display: none">
        <div class="tabs-nav">
          <button class="tab-btn" data-tab="t-activate">
            <span class="tab-icon">โก</span>
            <span>ุงูุชูุนูู ุงููุฏูู</span>
          </button>
          <button class="tab-btn" data-tab="t-ann">
            <span class="tab-icon">๐ข</span>
            <span>ุงูุฅุนูุงูุงุช</span>
          </button>
          <button class="tab-btn" data-tab="t-complaints">
            <span class="tab-icon">๐ฌ</span>
            <span>ุงูุดูุงูู ูุงูุงูุชุฑุงุญุงุช</span>
          </button>
          <button class="tab-btn active" data-tab="t-users">
            <span class="tab-icon">๐ฅ</span>
            <span>ุงููุดุชุฑููู ุงูุฌุฏุฏ</span>
          </button>
        </div>
      </section>

      <!-- ุงูุชูุนูู -->
      <section class="card" id="t-activate" style="display: none">
        <h2 class="title">ุงูุชูุนูู ุงููุฏูู ููุงุดุชุฑุงู</h2>
        <div class="grid grid-3">
          <div class="field">
            <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูููุณุชุฎุฏู</label>
            <input
              id="act-email"
              type="email"
              placeholder="example@email.com"
            />
          </div>
          <div class="field">
            <label>UID (ุงุฎุชูุงุฑู)</label>
            <input
              id="act-userid"
              type="text"
              placeholder="Auth0 sub ุฅู ูุงู ูุชุงุญูุง"
            />
          </div>
          <div class="field">
            <label>ุงููุฏูุฉ</label>
            <div style="display: flex; gap: 8px; align-items: center">
              <input
                id="act-amount"
                type="number"
                min="1"
                value="12"
                style="max-width: 120px"
              />
              <select id="act-unit" style="max-width: 140px">
                <option value="months" selected>ุดูุฑ/ุฃุดูุฑ</option>
                <option value="days">ููู/ุฃูุงู</option>
                <option value="years">ุณูุฉ/ุณููุงุช</option>
              </select>
            </div>
          </div>
          <div class="field" style="grid-column: 1/-1">
            <label>ููุงุญุธุฉ (ุงุฎุชูุงุฑู)</label>
            <input id="act-note" type="text" placeholder="ุณุจุจ/ูุฑุฌุน" />
          </div>
        </div>
        <div class="actions-row">
          <button class="btn primary" id="btn-activate">ุชูุนูู/ุชูุฏูุฏ</button>
          <span id="act-status" class="muted"></span>
        </div>
      </section>

      <!-- ุงูุฅุนูุงูุงุช -->
      <section class="card" id="t-ann" style="display: none">
        <h2 class="title">ุฅุนูุงู ุนุงู</h2>
        <div class="field">
          <label>ูุต ุงูุฅุนูุงู</label>
          <textarea
            id="ann-text"
            rows="3"
            placeholder="ุณูุธูุฑ ููุณุชุฎุฏูู ุงููููุน"
          ></textarea>
        </div>

        <div class="grid grid-3">
          <div class="field">
            <label>ุงูุญุงูุฉ</label>
            <select id="ann-active">
              <option value="true" selected>ูููุนูู</option>
              <option value="false">ููููู</option>
            </select>
          </div>

          <div class="field">
            <label>ุชุงุฑูุฎ ุงูุจุฏุก (ุงุฎุชูุงุฑู)</label>
            <div
              style="
                display: flex;
                gap: 8px;
                align-items: center;
                flex-wrap: wrap;
              "
            >
              <select id="ann-start-cal" style="max-width: 140px">
                <option value="greg" selected>ูููุงุฏู</option>
                <option value="hijri">ูุฌุฑู</option>
              </select>
              <input id="ann-start-g" type="date" />
              <input
                id="ann-start-h"
                type="text"
                inputmode="numeric"
                placeholder="ูุซุงู: 1447-02-10"
                style="display: none"
              />
            </div>
          </div>

          <div class="field">
            <label>ุชุงุฑูุฎ ุงูุงูุชูุงุก (ุงุฎุชูุงุฑู)</label>
            <div
              style="
                display: flex;
                gap: 8px;
                align-items: center;
                flex-wrap: wrap;
              "
            >
              <select id="ann-end-cal" style="max-width: 140px">
                <option value="greg" selected>ูููุงุฏู</option>
                <option value="hijri">ูุฌุฑู</option>
              </select>
              <input id="ann-end-g" type="date" />
              <input
                id="ann-end-h"
                type="text"
                inputmode="numeric"
                placeholder="ูุซุงู: 1447-02-15"
                style="display: none"
              />
            </div>
          </div>
        </div>

        <div class="actions-row">
          <button class="btn" id="btn-publish">ูุดุฑ/ุชุญุฏูุซ</button>
          <span id="ann-status" class="muted"></span>
        </div>

        <div class="card" style="margin-top: 14px">
          <h3 class="title" style="margin: 0 0 8px">ุงูุฅุนูุงูุงุช</h3>
          <div id="ann-current" class="muted" style="margin-bottom: 8px">โ</div>
          <div
            id="ann-list"
            class="grid"
            style="grid-template-columns: 1fr"
          ></div>
        </div>
      </section>

      <!-- ุงูุดูุงูู ูุงูุงูุชุฑุงุญุงุช -->
      <section class="card" id="t-complaints" style="display: none">
        <h2 class="title">ุงูุดูุงูู ูุงูุงูุชุฑุงุญุงุช</h2>

        <div class="toolbar">
          <select id="c-type">
            <option value="">ุงููู</option>
            <option value="complaint">ุดูุงูู</option>
            <option value="suggestion">ุงูุชุฑุงุญุงุช</option>
          </select>

          <select id="c-status">
            <option value="">ูู ุงูุญุงูุงุช</option>
            <option value="new">ุฌุฏูุฏุฉ</option>
            <option value="in_progress">ููุฏ ุงููุนุงูุฌุฉ</option>
            <option value="resolved">ูุบููุฉ</option>
            <option value="rejected">ูุฑููุถุฉ</option>
          </select>

          <input
            id="c-q"
            type="search"
            placeholder="ุจุญุซ (ุนููุงู/ูุต/ุฅูููู)"
            style="flex: 1; min-width: 200px"
          />
          <button class="btn" id="c-refresh">ุชุญุฏูุซ</button>
        </div>

        <div class="grid grid-2" style="margin-top: 12px">
          <div class="card">
            <table class="table" id="c-table">
              <thead>
                <tr>
                  <th>ุงูุนููุงู</th>
                  <th>ุงููุฑุณู</th>
                  <th>ุงูููุน</th>
                  <th>ุงูุญุงูุฉ</th>
                  <th>ุงูุชุงุฑูุฎ</th>
                </tr>
              </thead>
              <tbody id="c-rows">
                <tr>
                  <td colspan="5" class="muted">โ</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="card" id="c-detail">
            <h3 style="margin-top: 0">ุงูุชูุงุตูู</h3>
            <div id="c-empty" class="muted">ุงุฎุชุฑ ุนูุตุฑูุง ูู ุงููุงุฆูุฉโฆ</div>

            <div id="c-box" class="hidden">
              <p><strong>ุงูุนููุงู:</strong> <span id="cd-subject">โ</span></p>
              <p><strong>ุงููุฑุณู:</strong> <span id="cd-user">โ</span></p>
              <p><strong>ุงูุทูุจ:</strong> <span id="cd-kind">โ</span></p>
              <p>
                <strong>ุงูุญุงูุฉ:</strong>
                <span id="cd-status" class="pill">โ</span>
              </p>
              <div class="field">
                <label>ุณุฌู ุงูุฑุณุงุฆู</label>
                <div
                  id="cd-thread"
                  style="
                    border: 1px solid #e5e7eb33;
                    border-radius: 10px;
                    padding: 10px;
                    max-height: 340px;
                    overflow: auto;
                  "
                ></div>
              </div>

              <div class="grid">
                <div class="field">
                  <label>ุชุบููุฑ ุงูุญุงูุฉ</label>
                  <select id="cd-next">
                    <option value="">ูุง ุชุบููุฑ</option>
                    <option value="in_progress">ููุฏ ุงููุนุงูุฌุฉ</option>
                    <option value="resolved">ูุบููุฉ</option>
                    <option value="rejected">ูุฑููุถุฉ</option>
                  </select>
                </div>
              </div>

              <div class="field">
                <label>ุงูุฑุฏ ุนูู ุงููุฑุณู</label>
                <textarea
                  id="cd-reply"
                  rows="4"
                  placeholder="ุงูุชุจ ุงูุฑุฏ ููุงโฆ"
                ></textarea>
              </div>
              <div class="actions-row">
                <button class="btn primary" id="cd-send">ุฅุฑุณุงู ุงูุฑุฏ</button>
                <span id="cd-statusmsg" class="muted"></span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ุงููุดุชุฑููู ุงูุฌุฏุฏ -->
      <section class="card" id="t-users" style="display: none">
        <h2 class="title">ุงููุดุชุฑููู ุงูุฌุฏุฏ</h2>
        <div class="toolbar">
          <input
            id="u-q"
            type="search"
            placeholder="ุจุญุซ (ุงุณู/ุฅูููู)"
            style="flex: 1; min-width: 200px"
          />
          <select id="u-active">
            <option value="">ุงููู</option>
            <option value="true">ูุดุท</option>
            <option value="false">ุบูุฑ ูุดุท</option>
          </select>
          <button class="btn" id="u-refresh">ุชุญุฏูุซ</button>
        </div>

        <div class="card" style="margin-top: 10px">
          <table class="table">
            <thead>
              <tr>
                <th>ุงููุณุชุฎุฏู</th>
                <th>ุงูุฅูููู</th>
                <th>ุงูุถูู</th>
                <th>ุงูุญุงูุฉ</th>
                <th>ููุชูู</th>
                <th class="nowrap">ุชูุนูู ุณุฑูุน</th>
              </tr>
            </thead>
            <tbody id="u-rows">
              <tr>
                <td colspan="6" class="muted">โ</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </main>

    <div id="footer" data-component="components/footer.html"></div>

    <div class="toast" id="toast"></div>

    <!-- Auth0 SDK -->
    <script
      src="https://cdn.auth0.com/js/auth0-spa-js/2.1/auth0-spa-js.production.js"
      onerror="this.onerror=null;this.src='/assets/vendor/auth0-spa-js.production.js'"
    ></script>

    <!-- Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="assets/js/supabase-client.js"></script>

    <!-- ุงูุญุงุฑุณ ุงูุนุงู -->
    <script src="assets/js/require-auth.js"></script>
    <!-- Componnet Loader -->
    <script src="assets/js/component-loader.js"></script>
    <script src="assets/js/navbar.js"></script>

    <!-- moment + hijri -->
    <script src="https://cdn.jsdelivr.net/npm/moment@2.30.1/min/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment-hijri@2.3.1/moment-hijri.js"></script>

    <!-- ุณูุฑุจุช ุนุงู (ุซูู/ุฃุฒุฑุงุฑ) -->
    <script src="app.js"></script>

    <script src="assets/js/admin.js"></script>
  </body>
</html>
