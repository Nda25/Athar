<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ù…ÙŠØ¹Ø§Ø¯ </title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="style.css" />
<meta name="color-scheme" content="dark light">
<style>
  .field{ margin:8px 0 } .field label{ display:block; font-weight:700; margin:4px 0 }
  .field input,.field select{ width:100%; padding:10px; border-radius:10px; border:1px solid rgba(59,130,246,.35) }
  .grid2{ display:grid; gap:12px; grid-template-columns:1fr } @media(min-width:900px){ .grid2{ grid-template-columns:1fr 1fr } }
  .events{ margin-top:12px }
  .ev{ background:var(--card); border:1px solid rgba(59,130,246,.22); border-radius:12px; padding:10px; display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:8px }
  .ev .meta{ display:flex; gap:8px; flex-wrap:wrap; font-size:.9rem; opacity:.9 }
  .color{ width:14px; height:14px; border-radius:4px; border:1px solid rgba(0,0,0,.1) }
  .legend{ display:flex; gap:10px; flex-wrap:wrap; margin-top:8px; font-size:.9rem }
  .legend .pill{ padding:.18rem .5rem; border-radius:999px; border:1px solid rgba(59,130,246,.25) }
  .print-note{ text-align:center; margin-top:8px; opacity:.8 }
  @media print{ .topbar,.actions-row,.controls,.btn,.toast{ display:none !important } .ev{ page-break-inside:avoid } }
</style>
</head>
<body>
  <div class="backdrop"></div>
  <div class="pattern"></div>

  <div class="topbar">
    <div class="left-actions"><a class="btn" href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></div>
    <div class="actions"><button class="btn" id="themeToggle">ğŸŒ“</button></div>
    <div class="user"><a class="btn" href="programs.html">Ù…Ø³Ø§Ø­Ø© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ</a></div>
  </div>

  <header>
    <div class="hero">
      <h1 class="logo">Ù…Ù€ÙÙ€ÙŠØ¹Ù€Ø§Ø¯</h1>
      <div class="tag"><span class="dot"></span>Ù…ÙŠØ¹Ø§Ø¯Ùƒ Ù…Ø±Ø¢Ø© Ø§Ù„ØªØ²Ø§Ù…Ùƒâ€¦ ÙØ§Ø¬Ø¹Ù„ Ù„Ù‡ Ø£Ø«Ù€Ù€Ø±Ù‹Ø§</div>
    </div>
  </header>

  <main>
    <div class="container">
      <section class="card controls">
        <h2 class="title">Ø£Ø¶ÙÙ Ù…ÙˆØ¹Ø¯Ù‹Ø§ Ø¥Ù„Ù‰ ØªÙ‚ÙˆÙŠÙ… Ø§Ù„ØªØ±Ù…</h2>
        <div class="grid2">
          <div class="field"><label>Ø§Ù„Ù…Ø§Ø¯Ø©</label><input id="m-subj" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ù„ÙˆÙ…"></div>
          <div class="field"><label>Ø§Ù„ÙØµÙ„</label><input id="m-class" placeholder="Ù…Ø«Ø§Ù„: 6/Ø¨"></div>
          <div class="field"><label>Ø§Ù„ÙŠÙˆÙ…</label>
            <select id="m-day">
              <option>Ø§Ù„Ø£Ø­Ø¯</option><option>Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†</option><option>Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</option><option>Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</option><option>Ø§Ù„Ø®Ù…ÙŠØ³</option>
            </select>
          </div>
          <div class="field"><label>Ø§Ù„Ø­ØµØ© Ø±Ù‚Ù…</label><input id="m-slot" type="number" min="1" max="10" value="1"></div>
          <div class="field"><label>ØªØ§Ø±ÙŠØ® (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label><input id="m-date" type="date"></div>
          <div class="field"><label>Ù„ÙˆÙ†</label>
            <select id="m-color">
              <option value="#60a5fa">Ø£Ø²Ø±Ù‚</option>
              <option value="#22c55e">Ø£Ø®Ø¶Ø±</option>
              <option value="#f59e0b">Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ</option>
              <option value="#ef4444">Ø£Ø­Ù…Ø±</option>
              <option value="#a78bfa">Ø¨Ù†ÙØ³Ø¬ÙŠ</option>
            </select>
          </div>
        </div>
        <div class="actions-row">
          <button class="btn primary" id="add">Ø¥Ø¶Ø§ÙØ© Ù„Ù„ØªØ±Ù…</button>
          <button class="btn" id="export">Ù†Ø³Ø® Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯</button>
          <button class="btn" id="print">Ø·Ø¨Ø§Ø¹Ø©</button>
          <button class="btn ghost" id="clear">Ø­Ø°Ù Ø§Ù„ÙƒÙ„</button>
        </div>
      </section>

      <section class="card">
        <h2 class="title">Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„ØªØ±Ù…</h2>
        <div class="legend">
          <span class="pill">Ø±ØªÙ‘Ø¨ Ø­Ø³Ø¨ Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„Ø­ØµØ©</span>
          <span class="pill">ÙƒÙ„ Ù…ÙˆØ¹Ø¯ ÙŠØ¸Ù‡Ø± Ù…Ø¹Ù‡ Ø§Ù„Ù„ÙˆÙ† + Ø§Ù„Ù…Ø§Ø¯Ø© + Ø§Ù„ÙØµÙ„</span>
        </div>
        <div class="events" id="list"></div>
        <p class="print-note">Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ… Ø³ÙŠÙ…Ø¶ÙŠâ€¦ ÙˆØ³ÙŠØ¨Ù‚Ù‰ Ù…Ù†Ù‡ Ø§Ù„Ø£Ø«Ù€Ø± ğŸŒ¿</p>
      </section>
    </div>
  </main>

  <footer>
    <p class="foot-line">Ø§Ù„ØªØ®Ø·ÙŠØ· Ù‡Ø¯ÙŠØ© Ù„Ù„ÙˆÙ‚Øªâ€¦ ÙˆØ§Ù„Ø£Ø«Ø± Ø«Ù…Ø±ØªÙ‡.</p>
    <p class="foot-name">Ù†Ø¯Ù‰ Ø§Ù„Ù…Ø¬ÙŠØ±Ø´</p>
  </footer>

  <div class="toast" id="toast"></div>
  <script src="app.js"></script>
  <script>
  const KEY='mi3ad:events';
  function toast(m){ const t=document.getElementById('toast'); t.textContent=m; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),1200); }
  function load(){ try{ return JSON.parse(localStorage.getItem(KEY)||'[]'); }catch(_){ return [] } }
  function save(list){ localStorage.setItem(KEY, JSON.stringify(list)); }
  function render(){
    const box=document.getElementById('list'); box.innerHTML='';
    const daysOrder={'Ø§Ù„Ø£Ø­Ø¯':1,'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†':2,'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡':3,'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡':4,'Ø§Ù„Ø®Ù…ÙŠØ³':5};
    const items=load().sort((a,b)=> (daysOrder[a.day]-daysOrder[b.day]) || (a.slot-b.slot));
    if(!items.length){ box.innerHTML='<p class="muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø¨Ø¹Ø¯.</p>'; return; }
    items.forEach((e,i)=>{
      const d=document.createElement('div'); d.className='ev';
      d.innerHTML=`
        <div class="meta">
          <span class="color" style="background:${e.color}"></span>
          <strong>${e.subj}</strong>
          <span>â€” ÙØµÙ„ ${e.cls}</span>
          <span>â€” ${e.day} (Ø­ØµØ© ${e.slot})</span>
          ${e.date?`<span>â€” ${e.date}</span>`:''}
        </div>
        <a href="#" data-i="${i}" class="btn ghost" style="padding:6px 10px">Ø­Ø°Ù</a>`;
      box.appendChild(d);
    });
  }
  document.getElementById('add').addEventListener('click', ()=>{
    const subj=document.getElementById('m-subj').value.trim();
    const cls =document.getElementById('m-class').value.trim();
    const day =document.getElementById('m-day').value;
    const slot=+document.getElementById('m-slot').value||1;
    const date=document.getElementById('m-date').value;
    const color=document.getElementById('m-color').value;
    if(!subj||!cls){ toast('Ø£Ø¯Ø®Ù„ÙŠ Ø§Ù„Ù…Ø§Ø¯Ø© ÙˆØ§Ù„ÙØµÙ„'); return; }
    const list=load(); list.push({subj,cls,day,slot,date,color}); save(list); render(); toast('Ø£ÙØ¶ÙŠÙ Ù„Ù„ØªØ±Ù… âœ…');
  });
  document.getElementById('list').addEventListener('click', (e)=>{
    const a=e.target.closest('a[data-i]'); if(!a) return; e.preventDefault();
    const i=+a.getAttribute('data-i'); const list=load(); list.splice(i,1); save(list); render();
  });
  document.getElementById('export').addEventListener('click', ()=>{
    const txt=load().map(e=>`${e.day} | Ø­ØµØ© ${e.slot} | ${e.subj} â€” ÙØµÙ„ ${e.cls}${e.date?(' â€” '+e.date):''}`).join('\n');
    navigator.clipboard.writeText(txt||'').then(()=>toast('ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ…'));
  });
  document.getElementById('print').addEventListener('click', ()=>window.print());
  document.getElementById('clear').addEventListener('click', ()=>{
    if(confirm('Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„ØªØ±Ù…ØŸ')){ localStorage.removeItem(KEY); render(); }
  });
  render();
  </script>
  <script src="app.js"></script>
<script>
document.addEventListener('DOMContentLoaded', ()=>{
  bindAutoSave('miyad', '#miyad-form');
});
</script>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="assets/js/supabase-client.js"></script>
<script src="assets/js/require-auth.js"></script>
</body>
</html>
