<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>مُـلـهـم</title>
    <link rel="icon" type="image/x-icon" href="assets/icons/favicon.ico" />
    <link rel="shortcut icon" href="assets/icons/favicon.ico" />
    <link rel="apple-touch-icon" href="assets/icons/logo.png" />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <meta name="color-scheme" content="dark light" />
    <link rel="stylesheet" href="assets/css/mulham.css" />
  </head>
  <body>
    <div class="global-bg"></div>

    <div id="navbar" data-component="components/navbar.html"></div>

    <!-- Header Component -->
    <header>
      <div class="hero">
        <h1 class="logo">مـُلـهـم</h1>
        <div class="tag">
          <span class="dot"></span>كل دقيقة تحمل فكرة، وكل فكرة تُخلّد أثرًا
        </div>
      </div>
    </header>

    <main>
      <div class="container">
        <section class="card">
          <h2 class="title">مدخلات سريعة</h2>
          <form id="mulham-form">
            <div class="cols-3">
              <div class="field">
                <label>المادة</label
                ><input
                  id="s-subj"
                  name="s-subj"
                  placeholder="مثال: الرياضيات"
                />
              </div>
              <div class="field">
                <label>الوقت المتاح (دقيقة)</label>
                <select id="s-time" name="s-time">
                  <option>10</option>
                  <option selected>20</option>
                  <option>30</option>
                  <option>40</option>
                </select>
              </div>
              <div class="field">
                <label>مستوى بلوم</label>
                <select id="s-bloom" name="s-bloom">
                  <option value="remember">تذكّر</option>
                  <option value="understand" selected>فهم</option>
                  <option value="apply">تطبيق</option>
                  <option value="analyze">تحليل</option>
                  <option value="create">ابتكار</option>
                </select>
              </div>
            </div>

            <div class="cols-2">
              <div class="field">
                <label>الموضوع</label>
                <input
                  id="s-topic"
                  name="s-topic"
                  required
                  placeholder="اكتب موضوع الدرس بدقة"
                />
              </div>
              <div class="field">
                <label>المرحلة</label>
                <select id="s-age" name="s-age">
                  <option value="p1">ابتدائي دُنيا</option>
                  <option value="p2" selected>ابتدائي عُليا</option>
                  <option value="m">متوسط</option>
                  <option value="h">ثانوي</option>
                </select>
              </div>
            </div>

            <div class="cols-3">
              <div class="field inline">
                <label
                  ><input type="checkbox" id="s-noTools" /> بدون أدوات،كروت،قص
                  ولصق
                </label>
              </div>
              <div class="field inline">
                <label
                  ><input type="checkbox" id="s-adaptLow" /> ملاءمة للتحفيز
                  المنخفض</label
                >
              </div>
              <div class="field inline">
                <label
                  ><input type="checkbox" id="s-adaptDiff" /> مراعاة الفروق
                  الفردية</label
                >
              </div>
            </div>
          </form>

          <div class="actions-row">
            <button class="btn primary" id="go">ولّد الأنشطة</button>
            <button class="btn" id="more">أنشطة أخرى</button>
            <button class="btn" id="copy">نسخ</button>
            <button class="btn" id="print">طباعة البطاقات</button>
          </div>
        </section>

        <section class="card" id="out" style="display: none">
          <h2 class="title">الحزم المقترحة</h2>
          <div class="printable" id="printArea">
            <div id="meta" class="chips"></div>

            <div class="set-card" id="set-mv">
              <h3>نشاط صفّي حركي</h3>
              <p class="muted" id="mv-idea"><strong>مدخل الفكرة:</strong> —</p>
              <p id="mv-desc" class="muted">—</p>
              <div class="chips"><span class="chip" id="mv-dur">—</span></div>
              <h4 style="margin: 8px 0 4px">المواد</h4>
              <ul id="mv-mats" class="list"></ul>
              <h4 style="margin: 8px 0 4px">الخطوات</h4>
              <ol id="mv-steps" class="list"></ol>
              <h4 style="margin: 8px 0 4px">تذكرة خروج</h4>
              <p id="mv-exit">—</p>
              <h4 style="margin: 8px 0 4px">الأثر المتوقع</h4>
              <p id="mv-impact">—</p>
              <div id="mv-diff" class="diff-box" style="display: none"></div>
            </div>

            <div class="set-card" id="set-gr">
              <h3>نشاط صفّي جماعي</h3>
              <p class="muted" id="gr-idea"><strong>مدخل الفكرة:</strong> —</p>
              <p id="gr-desc" class="muted">—</p>
              <div class="chips"><span class="chip" id="gr-dur">—</span></div>
              <h4 style="margin: 8px 0 4px">المواد</h4>
              <ul id="gr-mats" class="list"></ul>
              <h4 style="margin: 8px 0 4px">الخطوات</h4>
              <ol id="gr-steps" class="list"></ol>
              <h4 style="margin: 8px 0 4px">تذكرة خروج</h4>
              <p id="gr-exit">—</p>
              <h4 style="margin: 8px 0 4px">الأثر المتوقع</h4>
              <p id="gr-impact">—</p>
              <div id="gr-diff" class="diff-box" style="display: none"></div>
            </div>

            <div class="set-card" id="set-in">
              <h3>نشاط صفّي فردي</h3>
              <p class="muted" id="in-idea"><strong>مدخل الفكرة:</strong> —</p>
              <p id="in-desc" class="muted">—</p>
              <div class="chips"><span class="chip" id="in-dur">—</span></div>
              <h4 style="margin: 8px 0 4px">المواد</h4>
              <ul id="in-mats" class="list"></ul>
              <h4 style="margin: 8px 0 4px">الخطوات</h4>
              <ol id="in-steps" class="list"></ol>
              <h4 style="margin: 8px 0 4px">تذكرة خروج</h4>
              <p id="in-exit">—</p>
              <h4 style="margin: 8px 0 4px">الأثر المتوقع</h4>
              <p id="in-impact">—</p>
              <div id="in-diff" class="diff-box" style="display: none"></div>
            </div>

            <div class="set-card">
              <h3>تلميحات</h3>
              <ul id="tips" class="list"></ul>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Footer Component -->
    <div id="footer" data-component="components/footer.html"></div>

    <script>
      // سنة تلقائية في الفوتر
      (function waitSetYear(attempts) {
        attempts = attempts || 0;
        var el = document.getElementById("year");
        if (el) {
          el.textContent = new Date().getFullYear();
          return;
        }
        if (attempts < 50)
          setTimeout(function () {
            waitSetYear(attempts + 1);
          }, 100);
      })();
    </script>
    <div class="toast" id="toast"></div>

    <!-- SDKs & مشروع -->
    <script defer src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script defer src="assets/js/supabase-client.js"></script>

    <!-- ملاحظة: يمكن أن يختلف الراپر الخاص بك ويعرّف دوال مختلفة للتوكن -->
    <script
      src="https://cdn.auth0.com/js/auth0-spa-js/2.1/auth0-spa-js.production.js"
      onerror="this.onerror=null;this.src='/assets/vendor/auth0-spa-js.production.js'"
    ></script>
    <script defer src="assets/js/require-auth.js"></script>

    <script defer src="assets/js/storage.js"></script>
    <script defer src="app.js"></script>
    <!-- Auth0 SDK -->
    <script
      defer
      src="https://cdn.auth0.com/js/auth0-spa-js/2/auth0-spa-js.production.js"
      onerror="this.onerror=null;this.src='/assets/vendor/auth0-spa-js.production.js'"
    ></script>
    <!-- Component loader + navbar behavior -->
    <script src="assets/js/component-loader.js"></script>
    <script src="assets/js/navbar.js"></script>

    <script src="assets/js/mulham.js"></script>
  </body>
</html>
