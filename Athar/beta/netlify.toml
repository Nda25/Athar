# netlify.toml (في جذر الريبو)

[build]
  base      = "Athar/beta"      # هذا يقول لنتلايفي اشتغل داخل Athar/beta
  publish   = "."               # يَنشر ملفات Athar/beta نفسها (HTML/CSS/JS)
  command   = ""                # ما عندك خطوة build

[build.environment]
  NODE_VERSION = "18"

[functions]
  directory = "netlify/functions"        # نسبةً إلى Athar/beta
  node_bundler = "esbuild"
  # تأكّد إنها موجودة في package.json
  external_node_modules = [
    "@supabase/supabase-js",
    "jwks-rsa",
    "jsonwebtoken",
    "nodemailer",
    "@google/generative-ai"
  ]
  included_files = ["netlify/functions/**"]

# ====================================
# Scheduled Functions (Cron Jobs)
# ====================================

[[functions]]
  path = "/remind-miyad"
  schedule = "@daily"  # تعمل مرة واحدة يومياً (12:00 AM UTC = 2:00 AM مصر)
  
# ملاحظة: لو عايز توقيت محدد، استخدم Cron Expression:
# schedule = "0 6 * * *"  ← الساعة 6:00 صباحاً UTC (8:00 صباحاً مصر)
# schedule = "0 22 * * *" ← الساعة 10:00 مساءً UTC (12:00 منتصف الليل مصر)

